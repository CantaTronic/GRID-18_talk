\documentclass[18pt]{beamer}
\usepackage{templates/beamerthemekit}
\titlelogo{empty_logo}

\title[Cosmic rays data center]{Current status of data center for cosmic rays \\based on KCDC}
\subtitle{GRID-2018, Dubna}
\author{Dmitriy Kostunin, Victoria Tokareva}

\institute{Institute for Nuclear Physics (IKP)}

\date{September 12, 2018}

% Bibliography

\usepackage[citestyle=authoryear,bibstyle=numeric,hyperref,backend=biber]{biblatex}
\addbibresource{templates/example.bib}
\bibhang1em

\newcommand{\itemarrow}{\scriptsize\raise1.25pt\hbox{\textcolor{kit-green100}{$\blacktriangleright$}}}
\newcommand{\concl}[1]{\item[\itemarrow]\textcolor{kit-green100}{#1}}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\begin{document}

% change the following line to "ngerman" for German style date and logos
\selectlanguage{english}

\section{Introduction}
\input{intro.tex}

% \section{The project objectives}
\section{The main section}

\begin{frame}{The project objectives}
% Work packages:
\textcolor{red}{Add the 'data flow' scheme!!!}
\begin{itemize}
 \item Astroparticle data center (based on KCDC)
 \item Software for big data processing (“Data Life Cycle Lab”)
 \item Multimessenger data analysis and mapping
 \item Go for the public ( astroparticle.online )
\end{itemize}
\end{frame}

\begin{frame}{Deep into KASCADE and Tunka data formats}
\textcolor{red}{Divide the blocks!!}
\begin{columns}
  \begin{column}[t]{0.49\textwidth}
    \begin{block}{Different}
      \begin{itemize}
        \item Data format (depends on avalilable detectors)
%         \item Information on detector properties (e.g.\ calibrations)
        \item Dedicated software for analyzing data
        \item Special system environment for the software
        \item \textcolor{red!50!black}{Current state}: separate APIs and UIs for different experiments
      \end{itemize}
    \end{block}

  \end{column}
  \hfill
  \begin{column}[t]{0.49\textwidth}
    \begin{block}{Common}
      \begin{itemize}
        \item Metadata format (e.g.\ time, location, atmospheric conditions)
        \item Software for EAS simulation (e.g. KORSIKA)
        \item Shower parameters
        \item Theoretical models
        \item \textcolor{blue!50!black}{Outlook}: unified API and UIs for different experiments
      \end{itemize}
    \end{block}
  \end{column}
\end{columns}
\end{frame}

\begin{frame}{WMS~--- workload management system}
% \textcolor{red}{\textit{Taken from Petrosyan's talk}}
\begin{itemize}
  \item The basic idea is to provide a central queue for all users and make all the distributed sites look like local ones;
  \item Starting from mid 90's are widely used in collider experiments (AliEn, Dirac, PanDA);
  \item Dedicated for:
  \begin{itemize}
  \item Unified usage of the distributed remote data and common data analysis;
  \item Conceal various low-level software and provide unified high-level interface;
  \end{itemize}
%   \item 
%   Hide middleware while supporting diversity and evolution
%   \begin{itemize}
%     \item WMS interacts with middleware, users see only high level workflow
%     \item Automation engines built in WMS, not exposed to users
%   \end{itemize}
  \item Provide the common way to issue tasks to different types of the distibuted sites;
  \item 
%   Use the same system for simulation, data processing and users analysis
  The same system for the data access, analysis and simulation.
%   \item Similar ideas have been implemented in several independent systems developed by LHC experiments: AliEn, Dirac, PanDA
\end{itemize}
\end{frame}

\begin{frame}{Data-oriented approach}
The data information:
\begin{itemize}
  \item Data types:
%   \begin{itemize}
%     \item Raw detector readouts;
%     \item Pre-analyzed events;
%     \items metadata;
%   \end{itemize}
%   \item Data structure:
%   \begin{itemize}
%     \item different formats;
%     \item different messengers;
%     \item common metadata;
%   \end{itemize}
\end{itemize}

Our approach:
\begin{itemize}
 \item It is proposed to store unique event id and metadata in the unified database
 \item With growing data sizes, distribured storage for events could be useful
\end{itemize}
\end{frame}



% \begin{tabular*}{1\textwidth}{p{0.45\textwidth}@{\extracolsep{\fill}}p{0.45\textwidth}}
% \hline\multicolumn{2}{c}{Location} \\
% % Experiments: remote locations with no or limited internet access &
% % Servers: data are transferred periodically on tapes or disks \\
% % \hline\multicolumn{2}{c}{Data} \\
% % Raw detector readouts: analyzed offline, not stored &
% % Pre-analyzed events: stored on servers \\
% % \hline\multicolumn{2}{c}{Different \& common} \\
% % Each experiment has its own detectors and provides its own format of events &
% % Events share \emph{common metadata} (e.g.\ time, location, atmospheric conditions) \\
% \hline\multicolumn{2}{c}{Storage} \\
% It is proposed to store unique event id and metadata in the unified database &
% With growing data sizes, distribured storage for events could be useful \\
% \hline
% \end{tabular*}

% \begin{frame}{Data storage}
% \begin{itemize}
%   \item Some experiments (in our case, TUNKA) are situated at remote locations with no or limited internet access, raw data are transferred periodically to servers on tapes or disks
%   \item Raw data are pre-analyzed, so-called ``direct'' observables ($e$, $\mu$, $\gamma$, $\hat{C}$, radio, etc.) are obtained, events are stored on servers
%   \item Each experiment has its own detectors and provides its own format of events
%   \item Events share \emph{common metadata} (e.g.\ time, location, atmospheric conditions)
%   \item It is proposed to store unique event id and metadata in the unified database
%   \item With growing data sizes, distribured storage for events could be useful
% \end{itemize}
% \end{frame}

\begin{frame}{Proposed cosmic-ray metadata structure}
\vspace{-1.5em}
\begin{center}
\includegraphics[width=0.82\textwidth]{pics/metadata.eps}
\end{center}
\end{frame}

\begin{frame}{Data analysis}
\begin{itemize}
  \item Software for data analysis depends on a particular experiment
  \begin{itemize}
    \item Problem: It may even require dedicated system environment
    \concl{Solution: Virtualization could be useful}
  \end{itemize}
  \item Data analysis requires huge amounts of input data
  \begin{itemize}
    \item Problem: It is often more optimal to perform it on the same site the data are stored
    \concl{Solution: Job management could handle the task}
  \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}{Simulation}
\textcolor{red}{Rewrite as a table with a common conclusion}
\begin{itemize}
  \item The software for EAS simulation (e.g.\ KORSIKA) does not depend on a particular experiment
  \concl{Simulations require standartized system environment}
  \item Simulations require small amounts of input data
  \item Simulations can be done independently for different events
  \concl{Simulations are easily scalable}
  \item Simulations require a lot of computing resources
  \concl{HPC resources are required}
%   \concl{The common conclusion: distributed computing could be useful}
\end{itemize}
The common conclusion: distributed computing could be useful
\end{frame}

\begin{frame}{Distributed analysis and simulation scheme}
% \textcolor{red}{Схема~--- проверить!)}
\begin{center}
\includegraphics[width=0.85\textwidth]{pics/KCDC_workflow_f1.png}
\end{center}
\end{frame}

% \begin{frame}{Mapping of observables between experiments}
% 
% \textcolor{red}{Draw the sheme of the mapping!!! See the Kostunin's slide \#8}
% 
% \begin{block}{Draft}
%   \begin{itemize}
%     \item Calibrations provided by experiments
%     \item Various models
%     \item Implementations are stored
%   \end{itemize}
% \end{block}
% \begin{center}
%   \includegraphics[width=0.7\textwidth]{pics/k8.pdf}
% \end{center}
% \end{frame}

% \begin{frame}{Access}
% \begin{block}{Draft}
%   \begin{itemize}
%     \item Benefits of open access
%     \item Education and outreach
%     \item Which infrastructure to use?
%   \end{itemize}
% \end{block}
% \end{frame}

\begin{frame}{Current status and outlook}
% - Для мульти-месснджер астрофизики принципиальной является задача организации совместного анализа данных собранных с разичных источников:
% - Исследованию данной проблемы посвящен совместный российко-немецкий проект КРАД;
% - В Цели проекта входит организация:
%     + дата-центра для астрофизических данных
%     + программной среды для распределенного анализа этих данных
%     + обеспечения открытого доступа к тим данным для всех желающих
%     + исзвлечение новых знаний об устростве вселенной посредствном применения соврмееннейших методов машинного обучения на собранных больших данных;
% - К настоящему моменту:
%     + Имеется дата-центр проекта Касакд под названием КСДС, на базе которого планируется создать в будущем общий центр доступа к данным;
%     + были проанализированны различия в форматах данных и предложены решения по организации хранения и распределённой обработки данных;
%     + составлена схема реляционной базы данных для будущего дата-центра, с использованием metadata-based approach.
%     + исследются возможности применения результатов проекта к образовательной деятельности, в настоящее время студенты КИТа используют КСДС для занятий, так же создан 
%     совместный ресурс astroparticle.online для обеспечения доступа к данным KASCADE  и TAIGA. Данный ресурс используется студентами ИГУ в курсе
%     "основы современной астрофизики``
% \begin{block}{And what has already been done so far?}
%   \begin{itemize}
%     \item KCDC general scheme
%     \item astroparticle.online
%     \item metadata description
%   \end{itemize}
% \end{block}
% \begin{block}{Conclusion}
%   \begin{itemize}
%     \item We are going to do a great job, we have a rich history, many plans and even a few of them have already been done. The next step of the project will be\ldots
%   \end{itemize}
% \end{block}
\end{frame}

% \begin{frame}{TODO}
% \textcolor{red}{What else is missing?}
% \end{frame}

\begin{frame}{}
\Huge
\begin{center}
\textcolor{kit-green100}{Thank you\\for your attention!}

\vspace{1em}
\Large
% \textcolor{kit-green100}{
Any questions?
% }
\end{center}
\end{frame}

%
% \begin{frame}{test}
%  \begin{columns}
% \begin{column}[t]{5cm}
%     text1
% \end{column}
%
% \begin{column}[t]{5cm}
% text2
% \end{column}
% \end{columns}
% \end{frame}


% \section{Section 1}
% \subsection{Subsection 1.1}
% \begin{frame}{Example slide A}
% \begin{itemize}
% \item PCM, Citation: \cite{becker2008a} %\language
% \pause
% \item Bullet point 2
% \item \dots
% \end{itemize}
% \end{frame}
%
% \subsection{Subsection 1.2}
% \begin{frame}{Example slide B}
% \begin{block}{Block 1}
% \begin{itemize}
% \item Bullet point 1
% \pause
% \item Bullet point 2
% \item \dots
% \end{itemize}
% \end{block}
% \end{frame}
%
% \section{Section 2}
% \begin{frame}{Example slide C}
% \begin{exampleblock}{Example 1}
% \begin{itemize}
% \item Bullet point 1
% \pause
% \item Bullet point 2
% \item \dots
% \end{itemize}
% \end{exampleblock}
% \end{frame}
%
% \begin{frame}{Example slide D}
% \begin{alertblock}{Alert 1}
% \begin{itemize}
% \item Bullet point 1
% \pause
% \item Bullet point 2
% \item \dots
% \end{itemize}
% \end{alertblock}
% \end{frame}
%
% \appendix
% \beginbackup
%
% \begin{frame}[allowframebreaks]{References}
% \printbibliography
% \end{frame}
%
% \backupend

\end{document}
